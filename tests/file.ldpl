# file.ldpl
# create a file, open a file, write to it, append to it, list contents of directory.
# part of the LDPL Programming Language Test Battery
# by Martín del Río
# https://github.com/lartu/ldpltest

DATA:
filename is text
filecontents is text
myText is text
directory is text list
sum is number

PROCEDURE:
store "file.test" in filename
in myText join "Hello There!" crlf "How are you?" crlf
write myText to file filename

load file filename in filecontents
join filecontents and "Fine, thank you!" in filecontents
in filecontents join crlf "-- Again --------" crlf filecontents crlf "Lalala" crlf
append filecontents to file filename

load file filename in filecontents
display filecontents

execute "mkdir testdir"
write "" to file "testdir/1"
write "" to file "testdir/70"
write "" to file "testdir/300"
execute "mkdir testdir/5000"
list contents of directory "testdir" in directory
for each myText in directory do
    in sum solve sum + myText
repeat
display sum crlf # The order is not important
list contents of directory "testdir/5000" in directory
store length of directory in sum
display sum crlf
execute "rmdir -r testdir"
